<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

<body>

  <main class="container">

    <h2>Friend Finding Survey! (must complete all questions)</h2>

    <h3>Name (Required)</h3>
    <input type="text" id="name" class="form-control">

    <h3>Photo Link (Required)</h3>
    <input type="text" id="photo" class="form-control">

    <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
    <form action="#" class="chosen-select" id="q1">
      <p><label>
          <input name="group1" type="radio" value="1"/>
          <span>Disagree</span>
      </label></p>
      <p><label>
          <input name="group1" type="radio" value="2"/>
          <span>Somewhat disagree</span>
      </label></p>
      <p><label>
          <input name="group1" type="radio" value="3"/>
          <span>Neutral</span>
      </label></p>
      <p><label>
          <input name="group1" type="radio" value="4"/>
          <span>Somewhat agree</span>
      </label></p>
      <p><label>
          <input name="group1" type="radio" value="5"/>
          <span>Agree</span>
      </label></p>
    </form>

    <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
    <form action="#" class="chosen-select" id="q2">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>


    <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
    <form action="#" class="chosen-select" id="q3">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>You rarely do something just out of sheer curiosity.</h4>
    <form action="#" class="chosen-select" id="q4">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>People can rarely upset you.</h4>
    <form action="#" class="chosen-select" id="q5">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>It is often difficult for you to relate to other people’s feelings.</h4>
    <form action="#" class="chosen-select" id="q6">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
    <form action="#" class="chosen-select" id="q7">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>You rarely get carried away by fantasies and ideas.</h4>
    <form action="#" class="chosen-select" id="q8">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
    <form action="#" class="chosen-select" id="q9">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <h4>You feel more energetic after spending time with a group of people.</h4>
    <form action="#" class="chosen-select" id="q10">
        <p><label>
            <input name="group1" type="radio" value="1"/>
            <span>Disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="2"/>
            <span>Somewhat disagree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="3"/>
            <span>Neutral</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="4"/>
            <span>Somewhat agree</span>
        </label></p>
        <p><label>
            <input name="group1" type="radio" value="5"/>
            <span>Agree</span>
        </label></p>
      </form>

    <button class="btn-large waves-effect waves-light red" type="submit" id="submit_btn">Submit</button>
    <hr>
  </main>

  <div id="match_modal" class="modal">
    <div class="modal-content">
        <h3>You've matched with:</h3>    
        <h4 id='match-name'></h4>
        <img src="" id='match-image'>
        <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Got it!</a>
    </div>
  </div>

<script type="text/javascript">

    $(document).ready( () => {  

        $('.modal').modal({
            dismissible: true, // Modal can be dismissed by clicking outside of the modal
            opacity: .5, // Opacity of modal background
            inDuration: 300, // Transition in duration
            outDuration: 200, // Transition out duration
            startingTop: '4%', // Starting top style attribute
            endingTop: '10%' // Ending top style attribute
        });

    // Submit button listener
    $("#submit_btn").on("click" , function(e) {
      e.preventDefault();

        // Check form completeness

        // Create new object that captures input data
        var newFriend = {
          name: $("#name").val(),
          image: $("#photo").val(),
          values: [
            $("#q1").find('input:checked').val(),
            $("#q2").find('input:checked').val(),
            $("#q3").find('input:checked').val(),
            $("#q4").find('input:checked').val(),
            $("#q5").find('input:checked').val(),
            $("#q6").find('input:checked').val(),
            $("#q7").find('input:checked').val(),
            $("#q8").find('input:checked').val(),
            $("#q9").find('input:checked').val(),
            $("#q10").find('input:checked').val()
          ]
        };

        // Post request to /api/friends
        $.post("/api/friends", newFriend)
        .then(function(match) {
            //Populate modal with match
            console.log(`Modal match name: ${match.name}`);
            console.log(`Modal match image: ${match.image}`);

            $("#match-name").text(match.name);
            $("#match-image").attr('src', match.image);
            // Show modal
            $("#match_modal").modal('open');
        });
    });
});
</script>

<style>
    .modal img{
        max-height: 300px;
    };
</style>

</body>

</html>